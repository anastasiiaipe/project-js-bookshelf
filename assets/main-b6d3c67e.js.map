{"version":3,"file":"main-b6d3c67e.js","sources":["../../src/js/loader.js","../../src/js/topBtn.js","../../src/js/render-categories.js","../../src/js/books-API.js","../../src/js/books-page.js"],"sourcesContent":["'use strict';\n\nconst loaderContainer = document.querySelector('.loader');\n\nfunction showLoader() {\n  loaderContainer.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  loaderContainer.classList.add('visually-hidden');\n}\n\nshowLoader(); // Показати loader перед початком завантаження сторінки\n\nwindow.addEventListener('load', () => {\n  setTimeout(() => {\n    hideLoader();\n  }, 350);\n});\n","// Функція, яка прокручує сторінку на початок\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nconst scrollToTopBtn = document.querySelector('.top-btn');\nscrollToTopBtn.style.display = 'none';\n\n// Показати кнопку, коли користувач прокрутив сторінку\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > window.innerHeight) {\n    scrollToTopBtn.style.display = 'inline-flex';\n  } else {\n    scrollToTopBtn.style.display = 'none';\n  }\n});\n\n// Встановлення обробника подій для кнопки\nscrollToTopBtn.addEventListener('click', scrollToTop);\n","//Render one book\nfunction renderOneBook(books) {\n  const booksRendered = books\n    .map(el => {\n      const { _id, book_image, title, author } = el;\n      return `<li class=\"books-box-itm\" id=\"${_id}\">\n        <div class=\"books-box-wrap\">\n                <img\n                  class=\"books-img\"\n                  src=\"${book_image}\"\n                  alt=\"${title}\"\n                />\n                <div class=\"books-overlay\">\n                  <a href=\"#\" data-id=\"${_id}\" class=\"books-overlay-text\">\n                  quick view </a>\n                </div>\n              </div>\n              <div class=\"books-box-desc\">\n                <p class=\"books-box-desc-title\">${title}</p>\n                <p class=\"books-box-desc-author\">${author}</p>\n              </div> \n              </li>`;\n    })\n    .join('');\n\n  return booksRendered;\n}\n//Render top books\nexport const renderTopBooks = (data, booksPerRow) => {\n  const categoriesTopBooks = data\n    .map(el => {\n      const categorieName = el.list_name;\n      const books = renderOneBook(el.books.slice(0, booksPerRow));\n      return `<div class=\"books-box-holder\">\n          <h3 class=\"books-box-subtitle\">${categorieName}</h3>\n          <ul class=\"books-box-list\">${books}</ul>\n          <button data-categorieName=\"${categorieName}\" class=\"books-btn-see-more\" type=\"button\">see more</button>\n        </div>`;\n    })\n    .join('');\n\n  return `<div class=\"books-container\"><h2 class=\"books-title\">Best Sellers Books</h2>${categoriesTopBooks}</div>`;\n};\n//Render categories\nexport const renderCategoriesList = data => {\n  const categoriesItems = data\n    .map(el => {\n      return `<li class=\"categories-itm\"><a href=\"#\" data-categorieName=\"${el.list_name}\">${el.list_name}</a></li>`;\n    })\n    .join('');\n\n  return `<li class=\"categories-itm js-categories-current \"><a href=\"#\" data-categorieName=\"\">All categories</a></li>${categoriesItems}`;\n};\n//Render category books\nexport const renderBooksByCategory = (data, categoryName) => {\n  if (!categoryName) {\n    return '';\n  }\n  const books = renderOneBook(data);\n  const categoryMarkup = `<div class=\"books-category-box visually-hidden\">\n  <h2 class=\"books-box-title\">${categoryName}</h2>\n          <ul class=\"books-category-list\">${books}</ul>\n          </div>`;\n  return categoryMarkup;\n};\n","import axios from 'axios';\nimport {\n  renderTopBooks,\n  renderCategoriesList,\n  renderBooksByCategory,\n} from './render-categories.js';\n\nconst BASE_URL = 'https://books-backend.p.goit.global';\n\nconst fetchData = async (endpoint, params = null) => {\n  const fetchUrl = `${BASE_URL}/books${endpoint}`;\n\n  try {\n    const response = await axios.get(fetchUrl, { params });\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport const getTopBooks = async booksPerRow => {\n  const data = await fetchData('/top-books/');\n  return renderTopBooks(data, booksPerRow);\n};\n\nexport const getCategoryList = async () => {\n  const data = await fetchData('/category-list/');\n  return renderCategoriesList(data);\n};\n\nexport const getBooksByCategory = async categoryName => {\n  console.log('Selected Category:', categoryName);\n  const data = await fetchData(`/category?category=${categoryName}`);\n  return renderBooksByCategory(data, categoryName);\n  // const BASE_URL = 'https://books-backend.p.goit.global';\n  // const END_POINT = '/books/';\n  // const PARAMS = `category?category=${categoryName}`;\n\n  // const url = BASE_URL + END_POINT + PARAMS;\n\n  // const res = await axios.get(url);\n  // return res.data;\n};\n\n// export const getBooksByCategory = async (categoryName = '') => {\n//   const data = await fetchData('/category/', { category: categoryName });\n//   return renderBooksByCategory(data);\n// };\n\nexport const getBookInfo = async id => {\n  return fetchData(`/${id}`);\n};\n","import {\n  getTopBooks,\n  getCategoryList,\n  getBooksByCategory,\n} from './books-API.js';\n\nconst booksContainer = document.querySelector('.books-box');\nconst categoriesListContainer = document.querySelector('.categories-list');\n\nconst BOOKS_PER_ROW_MAP = {\n  default: 3,\n  largeScreen: 5,\n  smallScreen: 1,\n};\n\n// Function to display books\nasync function showBooks(renderedContent) {\n  booksContainer.innerHTML = renderedContent;\n  const titleElement = document.querySelector('.books-box-desc-title');\n\n  if (titleElement) {\n    wrapLastWord(titleElement);\n  }\n}\n// Function to display categories\nasync function showCategories() {\n  const renderedCategories = await getCategoryList();\n  categoriesListContainer.innerHTML = renderedCategories;\n}\n\n// Function to display top books\nexport async function showTopBooks() {\n  const windowWidth = window.innerWidth;\n  const booksPerRow = determineBooksPerRow(windowWidth);\n  const renderedTop = await getTopBooks(booksPerRow);\n  showBooks(renderedTop);\n}\n\n//===========================================================\n// Function to display books by category\n\n// Отримуємо посилання на елемент, в якому будуть відображатися книги\nconst booksListContainer = document.querySelector('.books-category-list');\nexport async function showBooksByCategory(categoryName) {\n  console.log(categoryName);\n  //   const renderedBooks = await getBooksByCategory(categoryName);\n  try {\n    // Отримуємо книги вибраної категорії з API\n    const books = await getBooksByCategory(categoryName);\n\n    // Перевіряємо, чи є книги в цій категорії\n    if (books.length > 0) {\n      const booksHTML = renderBooksByCategory(books, categoryName);\n      // Якщо книги є, відображаємо їх на сторінці\n      booksListContainer.innerHTML = booksHTML;\n    } else {\n      // Якщо книги не знайдено, виводимо повідомлення про це користувачу\n      booksListContainer.innerHTML = '<p>No books found in this category</p>';\n    }\n  } catch (error) {\n    // Якщо сталася помилка під час отримання даних з API, виводимо повідомлення про це користувачу\n    console.error('Error fetching books by category:', error);\n    booksListContainer.innerHTML =\n      '<p>Failed to fetch books. Please try again later.</p>';\n  }\n  //   return showBooks(renderedBooks);\n}\n\n// Отримуємо всі елементи категорій\nconst categoryItems = document.querySelectorAll('.categories-itm');\n\ncategoryItems.forEach(item => {\n  item.addEventListener('click', function (event) {\n    // Забороняємо перехід за замовчуванням посилання\n    event.preventDefault();\n\n    // Отримуємо назву категорії, на яку натиснули\n    const categoryName = this.dataset.categorieName;\n\n    // Викликаємо функцію для відображення книг вибраної категорії\n    showBooksByCategory(categoryName);\n  });\n});\n//===============================================================\n// Function to wrap the last word in the title\nfunction wrapLastWord(titleElement) {\n  const textContent = titleElement.textContent.split(' ');\n  const lastWord = textContent.pop();\n  const updatedContent =\n    textContent.join(' ') +\n    (textContent.length > 0\n      ? ` <span class=\"books-title-color\">${lastWord}</span>`\n      : lastWord);\n  titleElement.innerHTML = updatedContent;\n}\n// Function to determine the number of books per row based on window width\nfunction determineBooksPerRow(windowWidth) {\n  if (windowWidth >= 1440) {\n    return BOOKS_PER_ROW_MAP.largeScreen;\n  } else if (windowWidth < 768) {\n    return BOOKS_PER_ROW_MAP.smallScreen;\n  } else {\n    return BOOKS_PER_ROW_MAP.default;\n  }\n}\n\n// Initialize the page\nif (booksContainer) {\n  showTopBooks();\n  showCategories();\n\n  categoriesListContainer.addEventListener('click', handleCategoryClick);\n  booksContainer.addEventListener('click', handleSeeMoreClick);\n}\n\n// Event handler for category click\nasync function handleCategoryClick(e) {\n  e.preventDefault();\n  const target = e.target;\n  const categoryName = target.dataset.categorieName;\n\n  console.log('Category Name:', categoryName);\n  if (categoryName === `all categories`) {\n    try {\n      const resp = await getTopBooks();\n      booksContainer.insertAdjacentHTML(\n        'afterbegin',\n        '<h2 class=\"books-box-title\">Best Sellers <span class=\"books-title-span\">Books</span></h2>'\n      );\n      booksContainer.insertAdjacentHTML(\n        'beforeend',\n        renderBooksByCategory(resp.data, categoryName)\n      );\n      categoriesListContainer\n        .querySelector('.js-categories-current')\n        .classList.remove('js-categories-current');\n      target.classList.add('js-categories-current');\n    } catch (error) {\n      console.error('Books was not found :', error.message);\n    }\n    return;\n  } else {\n    try {\n      const data = await getBooksByCategory(categoryName);\n      booksContainer.insertAdjacentHTML('beforeend', showBooksByCategory(data));\n      categoriesListContainer\n        .querySelector('.js-categories-current')\n        .classList.remove('js-categories-current');\n      target.classList.add('js-categories-current');\n    } catch (error) {\n      console.error('Books was not found :', error.message);\n    }\n  }\n}\n\n//   if (target.tagName === 'A') {\n//     const categoryName = target.dataset.categoryName;\n\n//     categoriesListContainer\n//       .querySelector('.js-categories-current')\n//       .classList.remove('js-categories-current');\n//     target.classList.add('js-categories-current');\n\n//     if (categoryName) {\n//       showBooksByCategory(categoryName);\n//     } else {\n//       showTopBooks();\n//     }\n//   }\n\n// Event handler for \"See More\" click\nfunction handleSeeMoreClick(e) {\n  e.preventDefault();\n  const target = e.target;\n\n  if (target.classList.contains('books-btn-see-more')) {\n    const categoryName = target.dataset.categoryName;\n\n    categoriesListContainer\n      .querySelector('.js-categories-current')\n      .classList.remove('js-categories-current');\n    categoriesListContainer\n      .querySelector(`[data-categoryName=\"${categoryName}\"]`)\n      .classList.add('js-categories-current');\n\n    showBooksByCategory(categoryName);\n  }\n}\n"],"names":["loaderContainer","showLoader","hideLoader","scrollToTop","scrollToTopBtn","renderOneBook","books","el","_id","book_image","title","author","renderTopBooks","data","booksPerRow","categorieName","renderCategoriesList","renderBooksByCategory","categoryName","BASE_URL","fetchData","endpoint","params","fetchUrl","axios","error","getTopBooks","getCategoryList","getBooksByCategory","booksContainer","categoriesListContainer","BOOKS_PER_ROW_MAP","showBooks","renderedContent","titleElement","wrapLastWord","showCategories","renderedCategories","showTopBooks","windowWidth","determineBooksPerRow","renderedTop","booksListContainer","showBooksByCategory","booksHTML","categoryItems","item","event","textContent","lastWord","updatedContent","handleCategoryClick","handleSeeMoreClick","target","resp"],"mappings":"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"}