{"version":3,"file":"main-187ecd86.js","sources":["../../src/js/loader.js","../../src/js/topBtn.js","../../src/js/render-categories.js","../../src/js/books-API.js","../../src/js/books-page.js"],"sourcesContent":["'use strict';\n\nconst loaderContainer = document.querySelector('.loader');\n\nexport function showLoader() {\n  loaderContainer.classList.remove('visually-hidden');\n}\n\nexport function hideLoader() {\n  loaderContainer.classList.add('visually-hidden');\n}\n\nshowLoader(); // Показати loader перед початком завантаження сторінки\n\nwindow.addEventListener('load', () => {\n  setTimeout(() => {\n    hideLoader();\n  }, 350);\n});\n","// Функція, яка прокручує сторінку на початок\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nconst scrollToTopBtn = document.querySelector('.top-btn');\nscrollToTopBtn.style.display = 'none';\n\n// Показати кнопку, коли користувач прокрутив сторінку\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > window.innerHeight) {\n    scrollToTopBtn.style.display = 'inline-flex';\n  } else {\n    scrollToTopBtn.style.display = 'none';\n  }\n});\n\n// Встановлення обробника подій для кнопки\nscrollToTopBtn.addEventListener('click', scrollToTop);\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction renderOneBook(books) {\n  const booksRendered = books\n    .map(el => {\n      const { _id, book_image, title, author } = el;\n      return `<li class=\"books-box-itm\" id=\"${_id}\">\n      <div class=\"books-box-wrap\">\n              <img\n                class=\"books-img\"\n                src=\"${book_image}\"\n                alt=\"${title}\"\n              />\n              <div class=\"books-overlay\">\n                <a href=\"#\" data-id=\"${_id}\" class=\"books-overlay-text\">\n                quick view </a>\n              </div>\n            </div>\n            <div class=\"books-box-desc\">\n              <p class=\"books-box-desc-title\">${title}</p>\n              <p class=\"books-box-desc-author\">${author}</p>\n            </div> \n            </li>`;\n    })\n    .join('');\n\n  return booksRendered;\n}\n\nexport const renderTopBooks = (data, booksPerRow) => {\n  if (!data || data.length === 0) {\n    showError('Sorry, books not found');\n    return;\n  } else {\n    const categoriesTopBooks = data\n      .map(el => {\n        const categoryName = el.list_name;\n        const books = renderOneBook(el.books.slice(0, booksPerRow));\n        return `<div class=\"books-box-holder\">\n        <h3 class=\"books-box-subtitle\">${categoryName}</h3>\n         <ul class=\"books-box-list\">${books}</ul>\n           <button data-categoryName=\"${categoryName}\" class=\"books-btn-see-more\" type=\"button\">see more</button>\n      </div>`;\n      })\n      .join('');\n\n    return `<h2 class=\"books-box-title\">Best Sellers Books</h2>${categoriesTopBooks}`;\n  }\n};\n\nexport const renderCategoriesList = data => {\n  const categoriesItems = data\n    .sort((a, b) => {\n      if (a.list_name < b.list_name) {\n        return -1;\n      }\n      if (a.list_name > b.list_name) {\n        return 1;\n      }\n      return 0;\n    })\n    .map(el => {\n      return `<li class=\"categories-itm\"><a href=\"#\" data-categoryName=\"${el.list_name}\">${el.list_name}</a></li>`;\n    })\n    .join('');\n\n  return ` <li class=\"categories-itm js-categories-current \">\n  <a href=\"#\" data-categoryName=\"all categories\">All categories</a></li>${categoriesItems}`;\n};\n\nexport const renderBooksByCategory = (data, categoryName) => {\n  if (!data || data.length === 0) {\n    showError('Sorry, category of book not found');\n    return;\n  } else {\n    const books = renderOneBook(data);\n    const categoryHtml = `<h2 class=\"books-box-title\">${categoryName}</h2>\n    <div class=\"books-category-box\">\n      <ul class=\"books-category-list\">${books}</ul>\n    </div>`;\n\n    return categoryHtml;\n  }\n};\n\nfunction showError(msg) {\n  iziToast.error({\n    message: msg,\n    messageColor: 'white',\n    backgroundColor: 'red',\n    position: 'topRight',\n  });\n}\n","import axios from 'axios';\nimport {\n  renderTopBooks,\n  renderCategoriesList,\n  renderBooksByCategory,\n} from './render-categories.js';\n\nconst BASE_URL = 'https://books-backend.p.goit.global';\n\n// const CACHE_KEY_TOP = 'topBooksData';\n// export const getTopBooks = async displayMode => {\n//   try {\n//     const cachedData = sessionStorage.getItem(CACHE_KEY_TOP);\n//     if (cachedData) {\n//       return renderTopBooks(JSON.parse(cachedData), displayMode);\n//     }\n\n//     const endpoint = '/books/top-books/';\n//     const fetchUrl = BASE_URL + endpoint;\n//     const response = await axios.get(fetchUrl);\n\n//     sessionStorage.setItem(CACHE_KEY_TOP, JSON.stringify(response.data));\n\n//     return renderTopBooks(responseData, displayMode);\n//   } catch (error) {\n//     console.error('Error fetching top books:', error);\n//     return '';\n//   }\n// };\n\n\nexport const getTopBooks = async booksPerRow => {\n     const endpoint = '/books/top-books/';\n    const fetchUrl = BASE_URL + endpoint;\n  \n  try {\n    const response = await axios.get(fetchUrl);\n    return renderTopBooks(response.data, booksPerRow);\n  } catch (error) {\n    console.error('Error fetching top books:', error);\n    return '';\n  }\n};\n\nexport const getCategoryList = async () => {\n  const endpoint = '/books/category-list/';\n  const fetchUrl = BASE_URL + endpoint;\n\n  try {\n    const response = await axios.get(fetchUrl);\n    return renderCategoriesList(response.data);\n  } catch (error) {\n   console.error('Error fetching category list:', error);\n  }\n};\n\n\n// const CACHE_KEY_LIST = 'categoryListData';\n// export const getCategoryList = async () => {\n//   try {\n//     const cachedData = sessionStorage.getItem(CACHE_KEY_LIST);\n//     if (cachedData) {\n//       return renderCategoriesList(JSON.parse(cachedData));\n//     }\n\n//     const endpoint = '/books/category-list/';\n//     const fetchUrl = BASE_URL + endpoint;\n//     const response = await axios.get(fetchUrl);\n//     sessionStorage.setItem(CACHE_KEY_LIST, JSON.stringify(response.data));\n//     return renderCategoriesList(response.data);\n//   } catch (error) {\n//     console.error('Error fetching category list:', error);\n//   }\n// };\n\n\nexport const getBooksByCategory = async categoryName => {\n  const endpoint = '/books/category/';\n  const fetchUrl = BASE_URL + endpoint;\n  const params = {\n    category: categoryName,\n  };\n\n  try {\n    const response = await axios.get(fetchUrl, { params });\n    return renderBooksByCategory(response.data, categoryName);\n  } catch (error) {\n    console.error('Error fetching books by category:', error);\n  }\n};\n\nexport const getBookInfo = async id => {\n  const endpoint = `/books/${id}`;\n  const fetchUrl = BASE_URL + endpoint;\n\n  try {\n    const response = await axios.get(fetchUrl);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching books id:', error);\n  }\n};\n","import { showLoader, hideLoader } from './loader.js';\n\nimport {\n  getTopBooks,\n  getCategoryList,\n  getBooksByCategory,\n} from './books-API.js';\n\n//function determine Books PerRow\nconst BOOKS_PER_ROW_MAP = {\n  default: 3,\n  largeScreen: 5,\n  smallScreen: 1,\n};\n\nfunction determineBooksPerRow(windowWidth) {\n  if (windowWidth >= 1440) {\n    return BOOKS_PER_ROW_MAP.largeScreen;\n  } else if (windowWidth < 768) {\n    return BOOKS_PER_ROW_MAP.smallScreen;\n  } else {\n    return BOOKS_PER_ROW_MAP.default;\n  }\n}\n\nconst windowWidthStart = window.innerWidth;\nlet ctrlBreikpoint = determineBooksPerRow(windowWidthStart);\n\nwindow.addEventListener('resize', () => {\n  const newWindowWidth = window.innerWidth;\n  ctrlBreikpoint = determineBooksPerRow(newWindowWidth);\n});\n\n//function show category\nasync function displayCategories() {\n  showLoader();\n  const categoriesContainer = document.querySelector('.categories-list');\n\n  const renderedCategories = await getCategoryList();\n  categoriesContainer.innerHTML = renderedCategories;\n  categoriesContainer.addEventListener('click', handleCategoryClick);\n  hideLoader();\n  return categoriesContainer;\n}\n\nasync function handleCategoryClick(e) {\n  e.preventDefault();\n\n  const target = e.target;\n\n  const catItem = target.closest('.categories-itm');\n  if (!catItem) {\n    return;\n  }\n\n  const catName = target.dataset.categoryname;\n\n  const categoriesContainer = await displayCategories();\n  updateCategoryClasses(categoriesContainer, catName);\n\n  if (catName === 'all categories') {\n    displayTopBooks();\n  } else {\n    await displayBooksByCategory(categoriesContainer, catName);\n  }\n}\n\n//button see more\ndocument.addEventListener('click', handleSeeMoreClick);\nasync function handleSeeMoreClick(event) {\n  if (event.target && event.target.classList.contains('books-btn-see-more')) {\n    const catName = event.target.dataset.categoryname;\n    console.log(catName);\n\n    await displayBooksByCategory(null, catName);\n\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n\n    const categoriesContainer = await displayCategories();\n\n    updateCategoryClasses(categoriesContainer, catName);\n  }\n}\n\n// show books by category\nasync function displayBooksByCategory(categoriesContainer, catName) {\n  showLoader();\n  try {\n    const booksContainer = document.querySelector('.books-box');\n    const newWindowWidth = window.innerWidth;\n    ctrlBreikpoint = determineBooksPerRow(newWindowWidth);\n    const booksPerRow = ctrlBreikpoint;\n    if (!booksContainer) {\n      console.error('Element not found.');\n      return;\n    }\n    const renderedBooks = await getBooksByCategory(catName);\n\n    booksContainer.innerHTML = renderedBooks;\n    console.log(renderedBooks);\n  } catch (error) {\n    console.error('Error displaying books by category:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\n//show best sellers books\nasync function displayTopBooks() {\n  showLoader();\n  try {\n    const topBooksContainer = document.querySelector('.books-box');\n    const newWindowWidth = window.innerWidth;\n    ctrlBreikpoint = determineBooksPerRow(newWindowWidth);\n    const booksPerRow = ctrlBreikpoint;\n    const renderedBooks = await getTopBooks(booksPerRow);\n\n    topBooksContainer.innerHTML = renderedBooks;\n  } catch (error) {\n    console.error('Error displaying top books:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\ndisplayTopBooks();\ndisplayCategories();\n\n//function update category classes categories-itm\nfunction updateCategoryClasses(categoriesContainer, catName) {\n  const categoriesItems =\n    categoriesContainer.querySelectorAll('.categories-itm');\n  categoriesItems.forEach(item => {\n    if (item.firstElementChild.dataset.categoryname === catName) {\n      item.classList.add('js-categories-current');\n    } else {\n      item.classList.remove('js-categories-current');\n    }\n  });\n}\n"],"names":["loaderContainer","showLoader","hideLoader","scrollToTop","scrollToTopBtn","renderOneBook","books","el","_id","book_image","title","author","renderTopBooks","data","booksPerRow","showError","categoryName","renderCategoriesList","a","b","renderBooksByCategory","msg","iziToast","BASE_URL","getTopBooks","fetchUrl","response","axios","error","getCategoryList","getBooksByCategory","params","BOOKS_PER_ROW_MAP","determineBooksPerRow","windowWidth","windowWidthStart","ctrlBreikpoint","newWindowWidth","displayCategories","categoriesContainer","renderedCategories","handleCategoryClick","e","target","catName","updateCategoryClasses","displayTopBooks","displayBooksByCategory","handleSeeMoreClick","event","booksContainer","renderedBooks","topBooksContainer","item"],"mappings":"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"}