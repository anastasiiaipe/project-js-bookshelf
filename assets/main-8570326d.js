import{a as m}from"./vendor-0cb09735.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();const g=document.querySelector(".loader");function h(){g.classList.remove("visually-hidden")}function L(){g.classList.add("visually-hidden")}h();window.addEventListener("load",()=>{setTimeout(()=>{L()},350)});function b(){window.scrollTo({top:0,behavior:"smooth"})}const i=document.querySelector(".top-btn");i.style.display="none";window.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?i.style.display="inline-flex":i.style.display="none"});i.addEventListener("click",b);const k="https://books-backend.p.goit.global/books",u=async(t,e=null)=>{try{const o=await m.get(`${k}${t}`,{params:e});return console.log("Data from server:",o.data),o.data}catch(o){throw console.error("Error fetching data:",o),o}},w=async()=>u("/category-list"),f=async()=>u("/top-books"),p=async(t="")=>u("/category",{category:t}),c=document.querySelector(".books-box"),a=document.querySelector(".categories-list");async function v(t){c.innerHTML=t;const e=document.querySelector(".books-box-desc-title");e&&S(e)}async function T(){const t=await w();a.innerHTML=t}async function C(){const t=await f();v(t)}const d=document.querySelector(".books-category-list");async function y(t){console.log(t);try{const e=await p(t);if(e.length>0){const o=renderBooksByCategory(e,t);d.innerHTML=o}else d.innerHTML="<p>No books found in this category</p>"}catch(e){console.error("Error fetching books by category:",e),d.innerHTML="<p>Failed to fetch books. Please try again later.</p>"}}const B=document.querySelectorAll(".categories-itm");B.forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();const o=this.dataset.categorieName;y(o)})});function S(t){const e=t.textContent.split(" "),o=e.pop(),s=e.join(" ")+(e.length>0?` <span class="books-title-color">${o}</span>`:o);t.innerHTML=s}c&&(C(),T(),a.addEventListener("click",j),c.addEventListener("click",q));async function j(t){t.preventDefault();const e=t.target,o=e.dataset.categorieName;if(console.log("Category Name:",o),o==="all categories"){try{const s=await f();c.insertAdjacentHTML("afterbegin",'<h2 class="books-box-title">Best Sellers <span class="books-title-span">Books</span></h2>'),c.insertAdjacentHTML("beforeend",renderBooksByCategory(s.data,o)),a.querySelector(".js-categories-current").classList.remove("js-categories-current"),e.classList.add("js-categories-current")}catch(s){console.error("Books was not found :",s.message)}return}else try{const s=await p(o);c.insertAdjacentHTML("beforeend",y(s)),a.querySelector(".js-categories-current").classList.remove("js-categories-current"),e.classList.add("js-categories-current")}catch(s){console.error("Books was not found :",s.message)}}function q(t){t.preventDefault();const e=t.target;if(e.classList.contains("books-btn-see-more")){const o=e.dataset.categoryName;a.querySelector(".js-categories-current").classList.remove("js-categories-current"),a.querySelector(`[data-categoryName="${o}"]`).classList.add("js-categories-current"),y(o)}}
//# sourceMappingURL=main-8570326d.js.map
