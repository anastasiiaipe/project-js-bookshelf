import{i as S,a as g}from"./vendor-8cce9181.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();const f=document.querySelector(".loader");function a(){f.classList.remove("visually-hidden")}function l(){f.classList.add("visually-hidden")}a();window.addEventListener("load",()=>{setTimeout(()=>{l()},350)});function B(){window.scrollTo({top:0,behavior:"smooth"})}const c=document.querySelector(".top-btn");c.style.display="none";window.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?c.style.display="inline-flex":c.style.display="none"});c.addEventListener("click",B);function m(o){return o.map(e=>{const{_id:t,book_image:r,title:n,author:i}=e;return`<li class="books-box-itm" id="${t}">
      <div class="books-box-wrap">
              <img
                class="books-img"
                src="${r}"
                alt="${n}"
              />
              <div class="books-overlay">
                <a href="#" data-id="${t}" class="books-overlay-text">
                quick view </a>
              </div>
            </div>
            <div class="books-box-desc">
              <p class="books-box-desc-title">${n}</p>
              <p class="books-box-desc-author">${i}</p>
            </div> 
            </li>`}).join("")}const C=(o,s)=>{if(!o||o.length===0){k("Sorry, books not found");return}else return`<h2 class="books-box-title">Best Sellers Books</h2>${o.map(t=>{const r=t.list_name,n=m(t.books.slice(0,s));return`<div class="books-box-holder">
        <h3 class="books-box-subtitle">${r}</h3>
         <ul class="books-box-list">${n}</ul>
           <button data-categoryName="${r}" class="books-btn-see-more" type="button">see more</button>
      </div>`}).join("")}`},T=o=>` <li class="categories-itm js-categories-current ">
  <a href="#" data-categoryName="all categories">All categories</a></li>${o.sort((e,t)=>e.list_name<t.list_name?-1:e.list_name>t.list_name?1:0).map(e=>`<li class="categories-itm"><a href="#" data-categoryName="${e.list_name}">${e.list_name}</a></li>`).join("")}`,E=(o,s)=>{if(!o||o.length===0){k("Sorry, category of book not found");return}else{const e=m(o);return`<h2 class="books-box-title">${s}</h2>
    <div class="books-category-box">
      <ul class="books-category-list">${e}</ul>
    </div>`}};function k(o){S.error({message:o,messageColor:"white",backgroundColor:"red",position:"topRight"})}const y="https://books-backend.p.goit.global",x=async o=>{const e=y+"/books/top-books/";try{const t=await g.get(e);return C(t.data,o)}catch(t){return console.error("Error fetching top books:",t),""}},$=async()=>{const s=y+"/books/category-list/";try{const e=await g.get(s);return T(e.data)}catch(e){console.error("Error fetching category list:",e)}},_=async o=>{const e=y+"/books/category/",t={category:o};try{const r=await g.get(e,{params:t});return E(r.data,o)}catch(r){console.error("Error fetching books by category:",r)}},d={default:3,largeScreen:5,smallScreen:1};function p(o){return o>=1440?d.largeScreen:o<768?d.smallScreen:d.default}const O=window.innerWidth;let u=p(O);window.addEventListener("resize",()=>{u=p(window.innerWidth)});async function b(){a();const o=document.querySelector(".categories-list"),s=await $();return o.innerHTML=s,o.addEventListener("click",q),l(),o}async function q(o){o.preventDefault();const s=o.target;if(!s.closest(".categories-itm"))return;const t=s.dataset.categoryname,r=await b();v(r,t),a(),t==="all categories"?w():await h(r,t)}document.addEventListener("click",P);async function P(o){if(o.target&&o.target.classList.contains("books-btn-see-more")){const s=o.target.dataset.categoryname;a(),await h(null,s),window.scrollTo({top:0,behavior:"smooth"});const e=await b();v(e,s)}}async function h(o,s){a();try{const e=document.querySelector(".books-box");if(!e){console.error("Element not found.");return}const t=await _(s);e.innerHTML=t,L(),console.log(t)}catch(e){console.error("Error displaying books by category:",e)}finally{l()}}async function w(){try{const o=document.querySelector(".books-box"),s=window.innerWidth;u=p(s);const t=await x(u);o.innerHTML=t,L()}catch(o){console.error("Error displaying top books:",o)}finally{l()}}window.addEventListener("load",()=>{w(),b()});function v(o,s){o.querySelectorAll(".categories-itm").forEach(t=>{t.firstElementChild.dataset.categoryname===s?t.classList.add("js-categories-current"):t.classList.remove("js-categories-current")})}async function L(){const o=document.querySelector(".books-box-title"),s=o.titleSpan.split(" "),e=s.pop(),t=s.join(" ")+(s.length>0?` <span class="books-title-color">${e}</span>`:e);o.innerHTML=t}
//# sourceMappingURL=main-0fdf36b4.js.map
