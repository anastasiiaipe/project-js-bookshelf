import{a as g}from"./vendor-0cb09735.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const f=document.querySelector(".loader");function h(){f.classList.remove("visually-hidden")}function L(){f.classList.add("visually-hidden")}h();window.addEventListener("load",()=>{setTimeout(()=>{L()},350)});function b(){window.scrollTo({top:0,behavior:"smooth"})}const l=document.querySelector(".top-btn");l.style.display="none";window.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?l.style.display="inline-flex":l.style.display="none"});l.addEventListener("click",b);const a={method:"get",baseURL:"https://books-backend.p.goit.global/books/",url:""};async function k(){return a.url="category-list",await g(a).then(e=>e.data).catch(e=>{console.log(e.message)})}async function p(t){return a.url=`category?category=${t}`,await g(a).then(o=>o.data).catch(o=>{console.log(o.message)})}async function m(){return a.url="top-books",await g(a).then(e=>e.data).catch(e=>{console.log(e.message)})}const c=document.querySelector(".books-box"),i=document.querySelector(".categories-list");async function w(t){c.innerHTML=t;const e=document.querySelector(".books-box-desc-title");e&&B(e)}async function T(){const t=await k();i.innerHTML=t}async function v(){const t=await m();w(t)}const u=document.querySelector(".books-category-list");async function y(t){console.log(t);try{const e=await p(t);if(e.length>0){const o=renderBooksByCategory(e,t);u.innerHTML=o}else u.innerHTML="<p>No books found in this category</p>"}catch(e){console.error("Error fetching books by category:",e),u.innerHTML="<p>Failed to fetch books. Please try again later.</p>"}}const C=document.querySelectorAll(".categories-itm");C.forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();const o=this.dataset.categorieName;y(o)})});function B(t){const e=t.textContent.split(" "),o=e.pop(),r=e.join(" ")+(e.length>0?` <span class="books-title-color">${o}</span>`:o);t.innerHTML=r}c&&(v(),T(),i.addEventListener("click",S),c.addEventListener("click",j));async function S(t){t.preventDefault();const e=t.target,o=e.dataset.categorieName;if(console.log("Category Name:",o),o==="all categories"){try{const r=await m();c.insertAdjacentHTML("afterbegin",'<h2 class="books-box-title">Best Sellers <span class="books-title-span">Books</span></h2>'),c.insertAdjacentHTML("beforeend",renderBooksByCategory(r.data,o)),i.querySelector(".js-categories-current").classList.remove("js-categories-current"),e.classList.add("js-categories-current")}catch(r){console.error("Books was not found :",r.message)}return}else try{const r=await p(o);c.insertAdjacentHTML("beforeend",y(r)),i.querySelector(".js-categories-current").classList.remove("js-categories-current"),e.classList.add("js-categories-current")}catch(r){console.error("Books was not found :",r.message)}}function j(t){t.preventDefault();const e=t.target;if(e.classList.contains("books-btn-see-more")){const o=e.dataset.categoryName;i.querySelector(".js-categories-current").classList.remove("js-categories-current"),i.querySelector(`[data-categoryName="${o}"]`).classList.add("js-categories-current"),y(o)}}
//# sourceMappingURL=main-badd2257.js.map
