import{a as m}from"./vendor-0cb09735.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const b=document.querySelector(".loader");function h(){b.classList.remove("visually-hidden")}function L(){b.classList.add("visually-hidden")}h();window.addEventListener("load",()=>{setTimeout(()=>{L()},350)});function v(){window.scrollTo({top:0,behavior:"smooth"})}const l=document.querySelector(".top-btn");l.style.display="none";window.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?l.style.display="inline-flex":l.style.display="none"});l.addEventListener("click",v);function f(e){return e.map(t=>{const{_id:s,book_image:r,title:n,author:i}=t;return`<li class="books-box-itm" id="${s}">
        <div class="books-box-wrap">
                <img
                  class="books-img"
                  src="${r}"
                  alt="${n}"
                />
                <div class="books-overlay">
                  <a href="#" data-id="${s}" class="books-overlay-text">
                  quick view </a>
                </div>
              </div>
              <div class="books-box-desc">
                <p class="books-box-desc-title">${n}</p>
                <p class="books-box-desc-author">${i}</p>
              </div> 
              </li>`}).join("")}const w=(e,o)=>`<div class="books-container"><h2 class="books-title">Best Sellers Books</h2>${e.map(s=>{const r=s.list_name,n=f(s.books.slice(0,o));return`<div class="books-box-holder">
          <h3 class="books-box-subtitle">${r}</h3>
          <ul class="books-box-list">${n}</ul>
          <button data-categorieName="${r}" class="books-btn-see-more" type="button">see more</button>
        </div>`}).join("")}</div>`,B=e=>`<li class="categories-itm js-categories-current "><a href="#" data-categorieName="">All categories</a></li>${e.map(t=>`<li class="categories-itm"><a href="#" data-categorieName="${t.list_name}">${t.list_name}</a></li>`).join("")}`,T=(e,o)=>{if(!o)return"";const t=f(e);return`<div class="books-category-box visually-hidden">
  <h2 class="books-box-title">${o}</h2>
          <ul class="books-category-list">${t}</ul>
          </div>`},S="https://books-backend.p.goit.global",g=async(e,o=null)=>{const t=`${S}/books${e}`;try{const s=await m.get(t,{params:o});return console.log("Data from server:",s.data),s.data}catch(s){console.log(s)}},k=async e=>{const o=await g("/top-books/");return w(o,e)},C=async()=>{const e=await g("/category-list/");return B(e)},p=async(e="")=>{const o=await g("/category/",{category:e});return T(o)},a=document.querySelector(".books-box"),c=document.querySelector(".categories-list"),d={default:3,largeScreen:5,smallScreen:1};async function $(e){a.innerHTML=e;const o=document.querySelector(".books-box-desc-title");o&&q(o)}async function x(){const e=await C();c.innerHTML=e}async function j(){const e=window.innerWidth,o=N(e),t=await k(o);$(t)}const u=document.querySelector(".books-category-list");async function y(e){console.log(e);try{const o=await p(e);if(o.length>0){const t=renderBooksByCategory(o,e);u.innerHTML=t}else u.innerHTML="<p>No books found in this category</p>"}catch(o){console.error("Error fetching books by category:",o),u.innerHTML="<p>Failed to fetch books. Please try again later.</p>"}}const M=document.querySelectorAll(".categories-itm");M.forEach(e=>{e.addEventListener("click",function(o){o.preventDefault();const t=this.dataset.categorieName;y(t)})});function q(e){const o=e.textContent.split(" "),t=o.pop(),s=o.join(" ")+(o.length>0?` <span class="books-title-color">${t}</span>`:t);e.innerHTML=s}function N(e){return e>=1440?d.largeScreen:e<768?d.smallScreen:d.default}a&&(j(),x(),c.addEventListener("click",E),a.addEventListener("click",H));async function E(e){e.preventDefault();const o=e.target,t=o.dataset.categorieName;if(console.log("Category Name:",t),t==="all categories"){try{const s=await k();a.insertAdjacentHTML("afterbegin",'<h2 class="books-box-title">Best Sellers <span class="books-title-span">Books</span></h2>'),a.insertAdjacentHTML("beforeend",renderBooksByCategory(s.data,t)),c.querySelector(".js-categories-current").classList.remove("js-categories-current"),o.classList.add("js-categories-current")}catch(s){console.error("Books was not found :",s.message)}return}else try{const s=await p(t);a.insertAdjacentHTML("beforeend",y(s)),c.querySelector(".js-categories-current").classList.remove("js-categories-current"),o.classList.add("js-categories-current")}catch(s){console.error("Books was not found :",s.message)}}function H(e){e.preventDefault();const o=e.target;if(o.classList.contains("books-btn-see-more")){const t=o.dataset.categoryName;c.querySelector(".js-categories-current").classList.remove("js-categories-current"),c.querySelector(`[data-categoryName="${t}"]`).classList.add("js-categories-current"),y(t)}}
//# sourceMappingURL=main-5dd5d300.js.map
